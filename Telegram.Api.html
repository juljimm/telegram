<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.3">
    <meta name="project" content="telegram v0.9.0">

    <title>Telegram.Api â€” telegram v0.9.0</title>
    <link rel="stylesheet" href="dist/elixir-d5ff82e6b0f5651c0ac0.css" />

    <script src="dist/sidebar_items-d117221de9.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-a088a6cc33ae3464193e.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="api-reference.html" class="sidebar-projectName" translate="no">
telegram
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.9.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/visciang/telegram/blob/main/lib/api.ex#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">Telegram.Api</span> 
  <small class="app-vsn" translate="no">(telegram v0.9.0)</small>

</h1>


  <section id="moduledoc">
<h1>Telegram</h1><p><img src="https://github.com/visciang/telegram/workflows/CI/badge.svg" alt="CI"/> <a href="https://visciang.github.io/telegram/readme.html"><img src="https://img.shields.io/badge/docs-latest-green.svg" alt="Docs"/></a> <a href="https://coveralls.io/github/visciang/telegram?branch=master"><img src="https://coveralls.io/repos/github/visciang/telegram/badge.svg?branch=master" alt="Coverage Status"/></a></p><p>Telegram library for the Elixir language.</p><h2 id="module-installation" class="section-heading">
  <a href="#module-installation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">installation</p>
  </a>
  Installation
</h2>
<p>The package can be installed by adding <code class="inline">telegram</code> to your list of dependencies in <code class="inline">mix.exs</code>:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">deps</span><span class="w"> </span><span class="k" data-group-id="3504506890-1">do</span><span class="w">
  </span><span class="p" data-group-id="3504506890-2">[</span><span class="w">
    </span><span class="p" data-group-id="3504506890-3">{</span><span class="ss">:telegram</span><span class="p">,</span><span class="w"> </span><span class="ss">git</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://github.com/visciang/telegram.git&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;xxx&quot;</span><span class="p" data-group-id="3504506890-3">}</span><span class="w">
  </span><span class="p" data-group-id="3504506890-2">]</span><span class="w">
</span><span class="k" data-group-id="3504506890-1">end</span></code></pre><h1>Telegram Bot API</h1><p>Telegram Bot API request.</p><p>The module expose a light layer over the Telegram Bot API HTTP-based interface,
it does not expose any &quot;(data)binding&quot; over the HTTP interface and tries to abstract
away only the boilerplate for building / sending / serializing the API requests.</p><p>Compared to a full-binded interface it could result less elixir frendly but it will
work with any version of the Bot API, hopefully without updates or incompatibily
with new Bot API versions (as much as they remain backward compatible).</p><p>References:</p><ul><li><a href="https://core.telegram.org/bots/api">API specification</a></li><li><a href="https://core.telegram.org/bots">Bot intro for developers</a></li></ul><p>Given the token of your Bot you can issue any request using:</p><ul><li>method: Telegram API method name (ex. &quot;getMe&quot;, &quot;sendMessage&quot;)</li><li>options: Telegram API method specific parameters (you can use elixir native types)</li></ul><h2 id="module-examples" class="section-heading">
  <a href="#module-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples:
</h2>
<p>Given the bot token (something like):</p><pre><code class="makeup elixir" translate="no"><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11&quot;</span></code></pre><h3 id="module-getme" class="section-heading">
  <a href="#module-getme" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">getme</p>
  </a>
  <a href="https://core.telegram.org/bots/api#getme">getMe</a>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="8368033377-1">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;getMe&quot;</span><span class="p" data-group-id="8368033377-1">)</span><span class="w">

</span><span class="p" data-group-id="8368033377-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8368033377-3">%{</span><span class="s">&quot;first_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Abc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">1234567</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;is_bot&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;ABC&quot;</span><span class="p" data-group-id="8368033377-3">}</span><span class="p" data-group-id="8368033377-2">}</span></code></pre><h3 id="module-sendmessage" class="section-heading">
  <a href="#module-sendmessage" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">sendmessage</p>
  </a>
  <a href="https://core.telegram.org/bots/api#sendmessage">sendMessage</a>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="7291018060-1">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sendMessage&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">chat_id</span><span class="p">:</span><span class="w"> </span><span class="mi">876532</span><span class="p">,</span><span class="w"> </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hello! .. silently&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">disable_notification</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="7291018060-1">)</span><span class="w">

</span><span class="p" data-group-id="7291018060-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="7291018060-3">%{</span><span class="s">&quot;chat&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7291018060-4">%{</span><span class="s">&quot;first_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Firstname&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">208255328</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;last_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Lastname&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;private&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;xxxx&quot;</span><span class="p" data-group-id="7291018060-4">}</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;date&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">1505118722</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;from&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7291018060-5">%{</span><span class="s">&quot;first_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Yyy&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">234027650</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;is_bot&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;yyy&quot;</span><span class="p" data-group-id="7291018060-5">}</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;message_id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">1402</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Hello! .. silently&quot;</span><span class="p" data-group-id="7291018060-3">}</span><span class="p" data-group-id="7291018060-2">}</span></code></pre><h3 id="module-getupdates" class="section-heading">
  <a href="#module-getupdates" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">getupdates</p>
  </a>
  <a href="https://core.telegram.org/bots/api#getupdates">getUpdates</a>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="3962722718-1">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;getUpdates&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">timeout</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="3962722718-1">)</span><span class="w">

</span><span class="p" data-group-id="3962722718-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="3962722718-3">[</span><span class="p" data-group-id="3962722718-4">%{</span><span class="s">&quot;message&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3962722718-5">%{</span><span class="s">&quot;chat&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3962722718-6">%{</span><span class="s">&quot;first_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Firstname&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">208255328</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;last_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Lastname&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;private&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;xxxx&quot;</span><span class="p" data-group-id="3962722718-6">}</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;date&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">1505118098</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;from&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3962722718-7">%{</span><span class="s">&quot;first_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Firstname&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">208255328</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;is_bot&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;language_code&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;en-IT&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;last_name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Lastname&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;xxxx&quot;</span><span class="p" data-group-id="3962722718-7">}</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;message_id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">1401</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Hello!&quot;</span><span class="p" data-group-id="3962722718-5">}</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;update_id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">129745295</span><span class="p" data-group-id="3962722718-4">}</span><span class="p" data-group-id="3962722718-3">]</span><span class="p" data-group-id="3962722718-2">}</span></code></pre><h2 id="module-sending-files" class="section-heading">
  <a href="#module-sending-files" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">sending-files</p>
  </a>
  Sending files
</h2>
<p>If a API parameter has a InputFile type and you want to send a local file,
for example a photo stored locally at &quot;/tmp/photo.jpg&quot;, just wrap the parameter
value in a tuple <code class="inline">{:file, &quot;/tmp/photo.jpg&quot;}</code>. If the file content is in memory
wrap it in <code class="inline">{:file_content, data, &quot;photo.jpg&quot;}</code> tuple.</p><h3 id="module-sendphoto" class="section-heading">
  <a href="#module-sendphoto" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">sendphoto</p>
  </a>
  <a href="https://core.telegram.org/bots/api#sendphoto">sendPhoto</a>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="3540380542-1">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sendPhoto&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">chat_id</span><span class="p">:</span><span class="w"> </span><span class="mi">876532</span><span class="p">,</span><span class="w"> </span><span class="ss">photo</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3540380542-2">{</span><span class="ss">:file</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/tmp/photo.jpg&quot;</span><span class="p" data-group-id="3540380542-2">}</span><span class="p" data-group-id="3540380542-1">)</span><span class="w">
</span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="3540380542-3">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sendPhoto&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">chat_id</span><span class="p">:</span><span class="w"> </span><span class="mi">876532</span><span class="p">,</span><span class="w"> </span><span class="ss">photo</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3540380542-4">{</span><span class="ss">:file_content</span><span class="p">,</span><span class="w"> </span><span class="n">photo</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;photo.jpg&quot;</span><span class="p" data-group-id="3540380542-4">}</span><span class="p" data-group-id="3540380542-3">)</span></code></pre><h2 id="module-downloading-files" class="section-heading">
  <a href="#module-downloading-files" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">downloading-files</p>
  </a>
  Downloading files
</h2>
<p>To download a file from the telegram server you need a <code class="inline">file_path</code> pointer to the file.
With that you can download the file via <code class="inline">Telegram.Api.file</code>.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="8432754197-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p" data-group-id="8432754197-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="8432754197-2">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sendPhoto&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">chat_id</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w"> </span><span class="ss">photo</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8432754197-3">{</span><span class="ss">:file</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;example/photo.jpg&quot;</span><span class="p" data-group-id="8432754197-3">}</span><span class="p" data-group-id="8432754197-2">)</span><span class="w">
</span><span class="c1"># pick the &#39;file_obj&#39; with the desired resolution</span><span class="w">
</span><span class="p" data-group-id="8432754197-4">[</span><span class="n">file_obj</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="8432754197-4">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">res</span><span class="p" data-group-id="8432754197-5">[</span><span class="s">&quot;photo&quot;</span><span class="p" data-group-id="8432754197-5">]</span><span class="w">
</span><span class="c1"># get the &#39;file_id&#39;</span><span class="w">
</span><span class="n">file_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file_obj</span><span class="p" data-group-id="8432754197-6">[</span><span class="s">&quot;file_id&quot;</span><span class="p" data-group-id="8432754197-6">]</span></code></pre><h3 id="module-getfile" class="section-heading">
  <a href="#module-getfile" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">getfile</p>
  </a>
  <a href="https://core.telegram.org/bots/api#getfile">getFile</a>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="5450274498-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5450274498-2">%{</span><span class="s">&quot;file_path&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">file_path</span><span class="p" data-group-id="5450274498-2">}</span><span class="p" data-group-id="5450274498-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="5450274498-3">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;getFile&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">file_id</span><span class="p">:</span><span class="w"> </span><span class="n">file_id</span><span class="p" data-group-id="5450274498-3">)</span><span class="w">
</span><span class="p" data-group-id="5450274498-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p" data-group-id="5450274498-4">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">file</span><span class="p" data-group-id="5450274498-5">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">file_path</span><span class="p" data-group-id="5450274498-5">)</span></code></pre><h2 id="module-reply-markup" class="section-heading">
  <a href="#module-reply-markup" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">reply-markup</p>
  </a>
  Reply Markup
</h2>
<p>If a API parameter has a &quot;A JSON-serialized object&quot; type (InlineKeyboardMarkup, ReplyKeyboardMarkup, etc),
just wrap the parameter value in a tuple <code class="inline">{:json, value}</code>.</p><p>Reference: <a href="https://core.telegram.org/bots#keyboards">Keyboards</a>,
<a href="https://core.telegram.org/bots#inline-keyboards-and-on-the-fly-updating">Inline Keyboards</a></p><h3 id="module-sendmessage-with-keyboard" class="section-heading">
  <a href="#module-sendmessage-with-keyboard" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">sendmessage-with-keyboard</p>
  </a>
  <a href="https://core.telegram.org/bots/api#sendmessage">sendMessage</a> with keyboard
</h3>
<pre><code class="makeup elixir" translate="no"><span class="n">keyboard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3022934168-1">[</span><span class="w">
  </span><span class="p" data-group-id="3022934168-2">[</span><span class="s">&quot;A0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A1&quot;</span><span class="p" data-group-id="3022934168-2">]</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="3022934168-3">[</span><span class="s">&quot;B0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;B1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;B2&quot;</span><span class="p" data-group-id="3022934168-3">]</span><span class="w">
</span><span class="p" data-group-id="3022934168-1">]</span><span class="w">
</span><span class="n">keyboard_markup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3022934168-4">%{</span><span class="ss">one_time_keyboard</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">keyboard</span><span class="p">:</span><span class="w"> </span><span class="n">keyboard</span><span class="p" data-group-id="3022934168-4">}</span><span class="w">
</span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="3022934168-5">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sendMessage&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">chat_id</span><span class="p">:</span><span class="w"> </span><span class="mi">876532</span><span class="p">,</span><span class="w"> </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Here a keyboard!&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">reply_markup</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3022934168-6">{</span><span class="ss">:json</span><span class="p">,</span><span class="w"> </span><span class="n">keyboard_markup</span><span class="p" data-group-id="3022934168-6">}</span><span class="p" data-group-id="3022934168-5">)</span></code></pre><h1>Telegram Bot</h1><p>Available Bot behaviours:</p><ul><li><a href="lib/bot.ex">Telegram.Bot</a>: compatible with the <code class="inline">Sync</code>/<code class="inline">Async</code> dispatch model</li><li><a href="lib/chat_bot.ex">Telegram.ChatBot</a>: compatible with the <code class="inline">ChatBot</code> dispatch model</li></ul><p>The library defines some general purpose Bot behaviours each implementing a specific telegram updates dispatch model.</p><h2 id="module-bot-updates-processing" class="section-heading">
  <a href="#module-bot-updates-processing" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">bot-updates-processing</p>
  </a>
  Bot updates processing
</h2>
<p>The Telegram platform supports two ways of processing bot updates, <code class="inline">getUpdates</code> and <code class="inline">setWebhook</code>.
<code class="inline">getUpdates</code> is a pull mechanism, <code class="inline">setwebhook</code> is push. (ref: <a href="https://core.telegram.org/bots/webhooks">bots webhook</a>)</p><p>This library currently implements the <code class="inline">getUpdates</code> mechanism.</p><p>This mode can be used in a dev environment or if your bot doesn't need to &quot;scale&quot;. Being in pull it works well behind a firewall (or behind an home internet router).</p><p>The webhook mode is part the development plan but, being this project a personal playground, unless sponsored there isn't an estimated date.</p><h2 id="module-quick-start" class="section-heading">
  <a href="#module-quick-start" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">quick-start</p>
  </a>
  Quick start
</h2>
<p>Check the examples under <code class="inline">example/example_*.exs</code>.
You can run them as a <a href="https://hexdocs.pm/mix/Mix.html"><code class="inline">Mix</code></a> self-contained script.</p><pre><code class="makeup shell" translate="no"><span class="">BOT_TOKEN=&quot;...&quot; example/example_chatbot.exs
</span></code></pre><h2 id="module-dispatch-model" class="section-heading">
  <a href="#module-dispatch-model" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">dispatch-model</p>
  </a>
  Dispatch model
</h2>
<p>We can define stateless / statefull bot.</p><ul><li><p>A stateless Bot has no memory of previous conversations, it just receives updates, process them and so on.</p></li><li><p>A statefull Bot instead can remember what happened in the past.
The state here refer to a specific chat, a conversation (chat_id) between a user and a bot &quot;instance&quot;.</p></li></ul><h2 id="module-telegram-bot-supervisor" class="section-heading">
  <a href="#module-telegram-bot-supervisor" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">telegram-bot-supervisor</p>
  </a>
  Telegram Bot Supervisor
</h2>
<ul><li><a href="lib/bot/sync/supervisor.ex">Telegram.Bot.Sync.Supervisor</a>: stateless synchronous.</li><li><a href="lib/bot/async/supervisor.ex">Telegram.Bot.Async.Supervisor</a>: stateless asynchronous.</li><li><a href="lib/bot/chat_bot/supervisor.ex">Telegram.Bot.ChatBot.Supervisor</a>: statefull (per chat).</li></ul><h1>Sample app</h1><p>A chat_bot app: <a href="https://github.com/visciang/telegram_example">https://github.com/visciang/telegram_example</a></p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:parameters/0" translate="no">parameters()</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:request_result/0" translate="no">request_result()</a>

        </div>

      </div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#file/2" translate="no">file(token, file_path)</a>

        </div>

          <div class="summary-synopsis"><p>Download a file.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#request/3" translate="no">request(token, method, parameters \\ [])</a>

        </div>

          <div class="summary-synopsis"><p>Send a Telegram Bot API request.</p></div>

      </div>

  </div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Types
    </h1>
    <div class="types-list">
<section class="detail" id="t:parameters/0">

  <div class="detail-header">
    <a href="#t:parameters/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">parameters()</h1>

      <a href="https://github.com/visciang/telegram/blob/main/lib/api.ex#L4" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> parameters() :: <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:request_result/0">

  <div class="detail-header">
    <a href="#t:request_result/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">request_result()</h1>

      <a href="https://github.com/visciang/telegram/blob/main/lib/api.ex#L5" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> request_result() :: {:ok, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="file/2">

  <div class="detail-header">
    <a href="#file/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">file(token, file_path)</h1>

      <a href="https://github.com/visciang/telegram/blob/main/lib/api.ex#L42" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> file(<a href="Telegram.Types.html#t:token/0">Telegram.Types.token</a>(), Telegram.Client.file_path()) :: <a href="#t:request_result/0">request_result</a>()</pre>

      </div>

<p>Download a file.</p><p>Reference: <a href="https://core.telegram.org/bots/api#file">BOT Api</a></p><p>Example:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># send a photo</span><span class="w">
</span><span class="p" data-group-id="9762530117-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p" data-group-id="9762530117-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="9762530117-2">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sendPhoto&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">chat_id</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w"> </span><span class="ss">photo</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9762530117-3">{</span><span class="ss">:file</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;example/photo.jpg&quot;</span><span class="p" data-group-id="9762530117-3">}</span><span class="p" data-group-id="9762530117-2">)</span><span class="w">
</span><span class="c1"># pick the &#39;file_obj&#39; with the desired resolution</span><span class="w">
</span><span class="p" data-group-id="9762530117-4">[</span><span class="n">file_obj</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="9762530117-4">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">res</span><span class="p" data-group-id="9762530117-5">[</span><span class="s">&quot;photo&quot;</span><span class="p" data-group-id="9762530117-5">]</span><span class="w">
</span><span class="c1"># get the &#39;file_id&#39;</span><span class="w">
</span><span class="n">file_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file_obj</span><span class="p" data-group-id="9762530117-6">[</span><span class="s">&quot;file_id&quot;</span><span class="p" data-group-id="9762530117-6">]</span><span class="w">

</span><span class="c1"># obtain the &#39;file_path&#39; to download the file identified by &#39;file_id&#39;</span><span class="w">
</span><span class="p" data-group-id="9762530117-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9762530117-8">%{</span><span class="s">&quot;file_path&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">file_path</span><span class="p" data-group-id="9762530117-8">}</span><span class="p" data-group-id="9762530117-7">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="9762530117-9">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;getFile&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">file_id</span><span class="p">:</span><span class="w"> </span><span class="n">file_id</span><span class="p" data-group-id="9762530117-9">)</span><span class="w">
</span><span class="p" data-group-id="9762530117-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p" data-group-id="9762530117-10">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Telegram.Api</span><span class="o">.</span><span class="n">file</span><span class="p" data-group-id="9762530117-11">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">file_path</span><span class="p" data-group-id="9762530117-11">)</span></code></pre>
  </section>
</section>
<section class="detail" id="request/3">

    <span id="request/2"></span>

  <div class="detail-header">
    <a href="#request/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">request(token, method, parameters \\ [])</h1>

      <a href="https://github.com/visciang/telegram/blob/main/lib/api.ex#L13" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> request(<a href="Telegram.Types.html#t:token/0">Telegram.Types.token</a>(), <a href="Telegram.Types.html#t:method/0">Telegram.Types.method</a>(), <a href="#t:parameters/0">parameters</a>()) ::
  <a href="#t:request_result/0">request_result</a>()</pre>

      </div>

<p>Send a Telegram Bot API request.</p><p>Reference: <a href="https://core.telegram.org/bots/api">BOT Api</a></p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.3) for the
          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
